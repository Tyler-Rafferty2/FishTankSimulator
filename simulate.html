<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Simulate</title>
    <style>
      .box {
        position: fixed;
        top: 0px;
        left: 0px;
        width: 100vw;
        height: 70px;
        margin-bottom: 10px;
        background-color: rgb(190, 190, 255);
        z-index: 9;
      }
      .flowers {
        position: fixed;
        top: 5px;
        left: 5px;
        width: 100px;
        height: 60px;
        z-index: 10;
      }
      .title {
        position: fixed;
        top: -10px;
        left: 125px;
        width: 1000px;
        height: 60px;
        font-family: "Times New Roman";
        font-size: 35px;
        z-index: 10;
      }
      .image-button {
        position: fixed;
        top: 5px;
        right: 10px;
        width: 60px;
        height: 50px;
        z-index: 10;
        background: none;
        background-size: cover;
        border: none;
        cursor: pointer;
        overflow: hidden;
        clip-path: polygon(11% 15%, 90% 15%, 90% 85%, 11% 85%);
      }
      .adding {
        position: relative;
        top: 50px;
        left: 40px;
        width: 1000px;
        height: 60px;
        font-family: "Times New Roman";
        font-size: 35px;
        z-index: 3;
      }
      #container {
        position: absolute; /* Make container a reference point */
        top: 200px;
        right: 0;
        left: 50%;
        width: 50%;
      }

      #tankdesc {
        position: relative;
      }

      ul {
        background: #3399ff;
        font-size: 15px;
        padding: 20px;
        width: 400px;
      }
      ul li {
        position: relative;
        background: #cce5ff;
        color: darkblue;
        margin: 5px;
      }
    </style>
  </head>
  <body>
    <div class="box"></div>
    <a href="index.html">
      <img class="flowers" src="images/flowers.jpg" alt="an image of flowers" />
    </a>
    <h1 class="title">Fish Tank Simulator</h1>

    <button
      class="image-button"
      type="button"
      onclick="alert('CSS Styled Button Clicked!')"
    >
      <img src="images/button.png" alt="Click Me" />
    </button>

    <h2 class="adding">Add a Fish</h2>
    <h3>Enter a tank size</h3>
    <input type="text" id="textInput" placeholder="Size of the Tank" />

    <script>
      function isFishInList(fishName) {
        const fishList = document.getElementById("fish-list");
        const listItems = fishList.getElementsByTagName("li");

        // Loop through the list items to see if the fish name exists
        for (let item of listItems) {
          if (item.textContent.includes(fishName)) {
            return true; // Fish is found
          }
        }
        return false; // Fish is not found
      }
      const fishData = [
        { name: "African Cichlids", size: 5, carelevel: 2, mintanksize: 30 },
        { name: "Angelfish", size: 6, carelevel: 2, mintanksize: 20 },
        { name: "Bala Shark", size: 14, carelevel: 2, mintanksize: 75 },
        { name: "Betta Fish", size: 2.5, carelevel: 1, mintanksize: 5 },
        {
          name: "Black Ghost Knifefish",
          size: 20,
          carelevel: 3,
          mintanksize: 100,
        },
        {
          name: "Blood Parrot Cichlid",
          size: 8,
          carelevel: 2,
          mintanksize: 30,
        },
        {
          name: "Boesemani Rainbow Fish",
          size: 6,
          carelevel: 2,
          mintanksize: 30,
        },
        { name: "Bolivian Ram", size: 3, carelevel: 2, mintanksize: 20 },
        { name: "Bristlenose Pleco", size: 6, carelevel: 1, mintanksize: 30 },
        {
          name: "Celestial Pearl Danio",
          size: 1,
          carelevel: 1,
          mintanksize: 10,
        },
        { name: "Cherry Barb", size: 2, carelevel: 1, mintanksize: 20 },
        { name: "Clown Loach", size: 12, carelevel: 2, mintanksize: 75 },
        { name: "Corydory", size: 3, carelevel: 1, mintanksize: 20 },
        { name: "Discus", size: 8, carelevel: 3, mintanksize: 50 },
        { name: "Dwarf Gourami", size: 2, carelevel: 2, mintanksize: 10 },
        { name: "Elephant Nose Fish", size: 9, carelevel: 2, mintanksize: 50 },
        { name: "Emperor Tetra", size: 2, carelevel: 1, mintanksize: 20 },
        {
          name: "Endlerâ€™s Livebearer",
          size: 1.5,
          carelevel: 1,
          mintanksize: 10,
        },
        { name: "Flowerhorn Cichlid", size: 12, carelevel: 2, mintanksize: 75 },
        { name: "German Blue Ram", size: 3, carelevel: 3, mintanksize: 20 },
        { name: "Glass Catfish", size: 4, carelevel: 2, mintanksize: 20 },
        { name: "Goldfish", size: 6, carelevel: 2, mintanksize: 20 },
        { name: "Guppy", size: 2.5, carelevel: 1, mintanksize: 5 },
        { name: "Harlequin Rasbora", size: 2, carelevel: 1, mintanksize: 10 },
        { name: "Hoplo Catfish", size: 6, carelevel: 1, mintanksize: 30 },
        { name: "Killifish", size: 4, carelevel: 2, mintanksize: 20 },
        { name: "Kissing Gourami", size: 4, carelevel: 1, mintanksize: 30 },
        { name: "Kribensis Cichlid", size: 4, carelevel: 1, mintanksize: 25 },
        { name: "Kuhli Loach", size: 4, carelevel: 2, mintanksize: 20 },
        { name: "Molly", size: 3, carelevel: 1, mintanksize: 10 },
        { name: "Neon Tetra", size: 1.5, carelevel: 1, mintanksize: 10 },
        { name: "Otocinclus Catfish", size: 2, carelevel: 2, mintanksize: 20 },
        { name: "Paradise Fish", size: 4, carelevel: 1, mintanksize: 20 },
        { name: "Pea Pufferfish", size: 1, carelevel: 2, mintanksize: 5 },
        { name: "Peacock Gudgeon", size: 2.5, carelevel: 2, mintanksize: 10 },
        { name: "Pearl Gourami", size: 4, carelevel: 1, mintanksize: 30 },
        { name: "Platy", size: 2.5, carelevel: 1, mintanksize: 10 },
        { name: "Rainbow Shark", size: 6, carelevel: 2, mintanksize: 55 },
        {
          name: "Rasbora Borapetensis",
          size: 2,
          carelevel: 1,
          mintanksize: 10,
        },
        { name: "Red Tail Shark", size: 6, carelevel: 2, mintanksize: 55 },
        { name: "Rosy Barb", size: 5, carelevel: 1, mintanksize: 30 },
        { name: "Rummynose Tetra", size: 2, carelevel: 2, mintanksize: 20 },
        { name: "Siamese Algae Eater", size: 6, carelevel: 1, mintanksize: 30 },
        { name: "Silver Dollar", size: 6, carelevel: 2, mintanksize: 50 },
        { name: "Sparkling Gourami", size: 1.6, carelevel: 1, mintanksize: 10 },
        { name: "Swordtail", size: 2.8, carelevel: 1, mintanksize: 15 },
        { name: "Tiger Barb", size: 3, carelevel: 1, mintanksize: 20 },
        {
          name: "White Cloud Mountain Minnow",
          size: 1.5,
          carelevel: 1,
          mintanksize: 10,
        },
        { name: "Zebra Danio", size: 2, carelevel: 1, mintanksize: 10 },
      ];

      function populateFishDropdown() {
        const selectElement = document.getElementById("fishes");
        fishData.forEach((fish) => {
          const option = document.createElement("option");
          option.value = fish.name; // The value could be an ID or name
          option.text = `${fish.name}`;
          selectElement.appendChild(option);
        });
      }

      // Call this function when the page loads
      window.onload = function () {
        populateFishDropdown();
      };

      // Function to get selected fish details
      function getSelectedFish() {
        const selectElement = document.getElementById("fishes");
        const selectedFishName = selectElement.value;

        // Find the selected fish object in the fishData array
        const selectedFish = fishData.find(
          (fish) => fish.name === selectedFishName
        );

        console.log(selectedFish); // You can use the fish's details (e.g., size, care level, etc.)
      }
      function addFishToList(event) {
        event.preventDefault(); // Prevent the form from submitting

        // Create a new fish object for each addition
        let newFish = {
          name: "",
          amount: 1,
        };

        // Get the selected fish
        const selectElement = document.getElementById("fishes");
        newFish.name = selectElement.options[selectElement.selectedIndex].text;

        if (!isFishInList(newFish.name)) {
          const li = document.createElement("li");
          li.textContent = `Fish: ${newFish.name}, Amount: ${newFish.amount}`;

          const removeButton = document.createElement("button");
          removeButton.textContent = "Remove";
          removeButton.style.marginLeft = "10px";
          removeButton.onclick = function () {
            li.remove(); // Remove the list item when the button is clicked
          };

          const addButton = document.createElement("button");
          addButton.textContent = "Add";
          addButton.style.marginLeft = "10px";
          addButton.onclick = function () {
            newFish.amount++;
            li.textContent = `Fish: ${newFish.name}, Amount: ${newFish.amount}`;
            li.appendChild(addButton);
            li.appendChild(minusButton);
            li.appendChild(removeButton);
          };

          const minusButton = document.createElement("button");
          minusButton.textContent = "Minus";
          minusButton.style.marginLeft = "10px";
          minusButton.onclick = function () {
            if (newFish.amount > 1) {
              newFish.amount--;
              li.textContent = `Fish: ${newFish.name}, Amount: ${newFish.amount}`;
              li.appendChild(addButton);
              li.appendChild(minusButton);
              li.appendChild(removeButton);
            }
          };

          li.appendChild(addButton);
          li.appendChild(minusButton);
          li.appendChild(removeButton);

          const fishList = document.getElementById("fish-list");
          fishList.appendChild(li);
        }
      }

      // Function to access and return the current fish list as an array of objects
      function getFishList() {
        const fishList = document.getElementById("fish-list");
        const listItems = fishList.getElementsByTagName("li");
        const fishes = [];

        for (let item of listItems) {
          const fishData = item.textContent.match(/Fish: (.*), Amount: (\d+)/);
          if (fishData) {
            const fishName = fishData[1];
            const fishAmount = parseInt(fishData[2]);
            fishes.push({ name: fishName, amount: fishAmount });
          }
        }

        return fishes;
      }

      // Example usage: Access the current list of fishes
      function showFishList() {
        const fishes = getFishList();
        console.log(fishes); // Logs the list of fishes
      }

      // Print function to display details
      function print(length, size, minsize, mincare) {
        const heading = document.createElement("h2");
        const tankdesc = document.createElement("h2");

        heading.textContent = `Total fish length: ${length} inches and tank size is ${size} and min tank size is ${minsize} and min care level is ${mincare}`;
        tankdesc.textContent =
          length > size ? "The tank is too small" : "The tank is large enough";

        const container = document.getElementById("container");
        const container2 = document.getElementById("tankdesc");

        if (container.firstElementChild) {
          container.removeChild(container.firstElementChild);
        }
        container.appendChild(heading);

        if (container2.firstElementChild) {
          container2.removeChild(container2.firstElementChild);
        }
        container2.appendChild(tankdesc);
      }

      function simulate() {
        const fishes = getFishList();
        let totalLength = 0;
        let minsize = 0;
        let mincare = 0;
        for (let selectedFish of fishes) {
          const fishInfo = fishData.find(
            (fish) => fish.name === selectedFish.name
          );
          if (fishInfo) {
            totalLength += selectedFish.amount * fishInfo.size; // Sum size * amount
            minsize += fishInfo.mintanksize;
            mincare += fishInfo.carelevel;
          }
        }

        const tanksize = parseInt(document.getElementById("textInput").value);

        print(totalLength, tanksize, minsize, mincare);
      }
    </script>

    <div>
      <h3>Select Fish:</h3>
      <select id="fishes"></select>
      <button onclick="addFishToList(event)">Add to List</button>
    </div>
    <ul id="fish-list"></ul>

    <div id="container"></div>
    <div id="tankdesc"></div>

    <button onclick="simulate()">Simulate</button>
  </body>
</html>
